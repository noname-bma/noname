<html>



<!--
    Identifiant application : 11791043143844007
    ClÃ© de l'application : https://www.creditagricolestore.fr/castore-oauth/resources/1/oauth/consumer/4e3837f1549e4704b9dca604d396e872
    Secret : 9075a183a60c415f9f677a74b0bb35a8
-->

    <head>
        <meta charset="utf-8" />
       <!-- Required inclusion for CAStore -->
        <script type="text/javascript" src="CAStoreStarterKit-JS-master/www/js/lib/sha1.js"></script>
        <script type="text/javascript" src="CAStoreStarterKit-JS-master/www/js/lib/oauth.js"></script>
        <script type="text/javascript" src="CAStoreStarterKit-JS-master/www/js/lib/castore.js"></script>
    </head>



<body>
    
    <div id="loginContainer" style="width:400px; height:300px;"></div>
    
    
    <script>   
    
    function getBAM(){
        caStore.session.GET('comptesBAM', onBAMObtained);

        function onBAMObtained(err, response){
            var account = response.data.compteBAMDTOs[0];
            alert('BAM!\nId:' + account.id + '\nAlias: ' + account.alias);
        }
    }
        
        
        var CONSUMER_KEY = "https://www.creditagricolestore.fr/castore-oauth/resources/1/oauth/consumer/4e3837f1549e4704b9dca604d396e872";
        var CONSUMER_SECRET = "9075a183a60c415f9f677a74b0bb35a8";
        var caStore = new CAStore(
            CONSUMER_KEY,
            CONSUMER_SECRET,
            'http://localhost:8081/callback_url.html'/* Callback url */,
            'http://localhost:8080/' /* Proxy server address */);
    
        var onCAStoreInitialized = function(err, caStore){
            loginContainer.hide();
            if (err)
                return console.log('Error initializing CAStore', err);
            sessionStore.save(caStore.export());
            getBAM();
        };
            
        caStore.init(
            document.getElementById("loginContainer"), /* Container for authentication iframe */
            onCAStoreInitialized);
            
        

        
    </script>








</body>
















</html>
